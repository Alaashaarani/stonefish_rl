<?xml version="1.0"?>
<scenario>
    <solver>
    </solver>

    <environment>
        <ned latitude="0.0" longitude="0.0"/>
    </environment>

    <materials>
        <material name="Steel" density="7891.0" restitution="0.9"/>
        <friction_table>
            <friction material1="Steel" material2="Steel" static="0.4" dynamic="0.1"/>
        </friction_table>
    </materials>

    <looks>
        <look name="Green" rgb="0.0 1.0 0.0" roughness="0.5"/>
        <look name="Yellow" rgb="1.0 1.0 0.0" roughness="0.5"/>
        <look name="Blue" rgb="0.0 0.0 1.0" roughness="0.5"/>
        <look name="Gray" gray="0.5" roughness="0.5"/>
    </looks>

    <static name="Floor" type="plane">
        <material name="Steel"/>
        <look name="Gray"/>
        <world_transform xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
    </static>

    <!-- Robot 1 -->
    <robot name="Acrobot" fixed="true" self_collisions="false">
        <base_link name="Ball" type="sphere" physics="surface">
            <dimensions radius="0.1"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <material name="Steel"/>
            <look name="Green"/>
        </base_link>

        <link name="Cylinder1" type="cylinder" physics="surface">
            <dimensions radius="0.05" height="0.5"/>
            <origin xyz="0.0 0.0 0.5" rpy="0.0 0.0 0.0"/>
            <material name="Steel"/>
            <look name="Green"/>
        </link>

        <link name="Cylinder2" type="cylinder" physics="surface">
            <dimensions radius="0.05" height="0.5"/>
            <origin xyz="0.0 0.0 0.5" rpy="0.0 0.0 0.0"/>
            <material name="Steel"/>
            <look name="Yellow"/>
        </link>

        <joint name="Joint1" type="revolute">
            <parent name="Ball"/>
            <child name="Cylinder1"/>
            <origin xyz="0.0 0.0 0.1" rpy="0.0 0.0 0.0"/>
            <axis xyz="0.0 1.0 0.0"/>
        </joint>

        <joint name="Joint2" type="revolute">
            <parent name="Cylinder1"/>
            <child name="Cylinder2"/>
            <origin xyz="0.0 0.0 1.1" rpy="0.0 0.0 0.0"/>
            <axis xyz="0.0 1.0 0.0"/>
        </joint>

        <actuator name="Servo" type="servo">
          <!-- Com més alts siguin els valors més temps tardarà en aturar-se -->
            <controller position_gain="1.0" velocity_gain="100.0" max_torque="1000.0" max_velocity="1000.0"/> <!-- Necessari, sino peta -->
            <joint name="Joint1"/>
            <initial position="0.2"/>
        </actuator>

        <actuator name="Servo2" type="servo">
          <!--  position_gain: Es torna locu quan més gran és el valor, quan més o menys ha arribat a la posició és com que es passa, intenta rectificar, pero després es torna a passar i aixi succesicament.
                               Amb més de 150.000 steps fetes, encara estava fent el locu intentant arribar a la posició.
                velocity_gain: Com més alt el valor, sembla que més dificil és de moure, arriba més lent a la posició indicada, sembla com que li costi més arribar al punt indicat. 
                max_torque: Com més petit el valor menys força té per arribar a l'objectiu, inclus pot ser que amb un valor molt petit no tingui prou força per arribar-hi.
                max_velocity: En aquest casi que no ens afecta, el pq suposu que deu ser pel fet que estem utilitzant un RotaryEncoder, i aquest al aplicar casi tot amb radiants, 
                              potser només té en compte el max_torque i el max_velocity potser afecta més directament a algun altre tipus d'actuadors. -->
           
            <controller position_gain="1.0" velocity_gain="100.0" max_torque="1000.0" max_velocity="1000.0"/> <!-- Necessari, sino peta -->
            <joint name="Joint2"/>
            <initial position="0.2"/>
        </actuator>
    
        <sensor name="Encoder" type="encoder">
            <joint name="Joint1"/>
        </sensor>

        <sensor name="Encoder2" type="encoder">
            <joint name="Joint2"/>
        </sensor>
        
        <world_transform xyz="0.0 0.0 -2.0" rpy="0.0 0.0 0.0"/>
    </robot>

    <!-- Robot 2 -->
    <robot name="CylinderBot" fixed="false" self_collisions="false">
        <base_link name="CylBase" type="cylinder" physics="surface">
            <dimensions radius="0.09" height="0.4"/>
            <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0"/>
            <material name="Steel"/>
            <look name="Blue"/>
        </base_link>
        <world_transform xyz="1.0 0.0 0.2" rpy="0.0 0.0 0.0"/>
    </robot>

</scenario>
